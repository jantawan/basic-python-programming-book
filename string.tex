\chapter{การใช้งาน String}
\section{ความหมายของ String}

String คือ ข้อความหรือตัวอักษรที่เรียงต่อๆ กันที่อยู่ในเครื่องหมายคำพูดแบบ Double Quotes เช่น “How are you?” หรือ Single Quotes เช่น ‘How are you?’ 

\section{ฟังก์ชัน \texttt{len()}}

มีฟังก์ชันสำหรับ String อยู่หลายฟังก์ชัน เช่น ฟังก์ชัน \pyinline{len()} มีวัตถุประสงค์เพื่อหาความยาวของ String นั้น และสำหรับการระบุตำแหน่งของตัวอักษรแต่ละตัวใน String จะใช้สัญลักษณ์ก้ามปู \pyinline{[ ]} โดยตัวชี้หรือ Index จะเริ่มต้นจาก 0 เช่น \pyinline{fruit[0]}

\begin{pycode}
>>> fruit = 'banana'
>>> fruit
'banana'
>>> len(fruit)
6
>>> type(fruit)
|<class \rq{}str\rq{}>|
>>> fruit[0]
'b'
>>> fruit[1]
'a'
>>> fruit[2]
'n'
\end{pycode}


\section{การเดินทางตามตัวชี้ของ String}

การเดินทางไปเรื่อยๆ ตามตัวชี้ของ String โดยในตัวอย่างแรกจะเป็นการใช้ while ส่วนในตัวอย่างถัดมาจะใช้ตัวแปร string เป็น Iterator ซึ่งผลลัพธ์จะออกมาเหมือนกัน

Source code:
\begin{pycode}
fruit = 'banana'
i = 0
while i < len(fruit):
    print(fruit[i])
    i += 1
for character in fruit: print(character)
\end{pycode}

Result:
\begin{pycode}
>>>
b
a
n
a
n
a
b
a
n
a
n
a
>>>
\end{pycode}



\section{การตัดคำใน String}

การตัดคำใน String ด้วยตัวชี้ (Index) โดยการตัดคำเป็นส่วนย่อยๆ จะมีรูปแบบการเขียนเป็น [start:end] โดยที่ start เป็นตำแหน่งของ Index เริ่มต้นที่ต้องการ และ end นั้นเป็นตำแหน่งก่อนหน้าตำแหน่งสุดท้ายของตัวอักษรที่ต้องการ

\begin{pycode}
>>> s = 'Monty Python'
>>> s
'Monty Python'
>>> len(s)
12
>>> s[0:1]
'M'
>>> s[0]
'M'
>>> s[0:2]
'Mo'
>>>
\end{pycode}


หากเขียนเป็น  \pyinline{[start:]} ระบุจุดเริ่มต้นที่ start ผลลัพธ์จะแสดงยาวไปจนถึงจุดสิ้นสุด และหากเขียนเป็น  \pyinline{[:end]} ผลลัพธ์ที่ได้จะแสดงอักษรตั้งแต่ตัวแรกหรือตัวชี้ที่ศูนย์ไปจนถึงตัวสิ้นสุดที่ระบุไว้

\begin{pycode}
>>> s[1:]
'onty Python'
>>> s[:5]
'Monty'
>>>
\end{pycode}


\section{โครงสร้างข้อมูลที่เปลี่ยนแปลงไม่ได้}

String เป็นโครงสร้างข้อมูลที่เปลี่ยนแปลงไม่ได้ ดังนั้นถ้าหากต้องการสร้าง String ใหม่ก็ต้องสร้างเป็น Object ใหม่เท่านั้น

\begin{pycode}
>>> s
'Monty Python'
>>> s[0] = 'J'
Traceback (most recent call last):
    File ''<pyshell#19>'', line 1, in <module>
        s[0] = 'J'
TypeError: 'str' object does not support item assignment
>>> id(s)
62723320
>>> a = 'J' + s[1:]
>>> a
'Jonty Python'
>>> id(a)
62737048
\end{pycode}


\section{การค้นหาตัวอักษรใน String}

การเขียนโปรแกรมเพื่อค้นหาตัวอักษรใน String แล้วส่งค่าออกมาเป็นค่าตัวชี้ตัวอักษรใน String สามารถเขียนเป็นตัวอย่างฟังก์ชันดังนี้ คือ 

\begin{itemize}
\item ให้ฟังก์ชันชื่อว่า find มีการส่งค่า str เป็น string และค่า char เป็น character 
\item ตั้งตัวนับ i เริ่มต้นที่ 0
\item ขณะที่ i ยังน้อยกว่าจำนวนตัวอักษรใน string ที่ชื่อว่า str ให้ดำเนินการดังนี้คือ
	\begin{itemize}
		\item ตรวจสอบว่า ถ้าตัวชี้ของตัวอักษรเท่ากับตัวอักษรที่ต้องการแล้ว ให้ส่งค่าตัวนับออกมา
	\end{itemize}
\item เมื่อ while เป็นเท็จแล้ว หรือเมื่อค้นจนครบ character ใน string แล้วให้ส่งค่ากลับคือ -1
\end{itemize}

Source code:
\begin{pycode}
def find(str, char):
    i = 0
    while i < len(str):
       if str[i] == char: return i
       i += 1
    return -1
\end{pycode}

Result:
\begin{pycode}
>>> find('Mike', 'c')
-1
>>> find('Mike', 'e')
3
>>>
\end{pycode}



\section{เมธอดของ String (String Methods)}

การดำเนินการกับ String สามารถศึกษาฟังก์ชันได้ที่ \url{https://docs.python.org/2.4/lib/string-methods.html} เช่น  \pyinline{str.upper()} ใช้ทำงานเพื่อแปลงตัวอักษรภาษาอังกฤษเป็นตัวพิมพ์ใหญ่

\begin{pycode}
>>> s = 'Monty Python'
>>> s
'Monty Python'
>>> s.count('t')
2
>>> s.capitalize()
'Monty python'
>>> s.upper()
'MONTY PYTHON'

\end{pycode}


\section{\texttt{in} โอเปอร์เรเตอร์}

ใช้ในการพิสูจน์ค่าแบบ Boolean Expression เช่น ‘t’ in s แปลว่า ตัวอักษรตัว t อยู่ใน String ชื่อว่า s หรือไม่ หรือในทางตรงข้ามเพื่อการตรวจสอบว่าไม่มีหรือไม่ให้ใส่ not in 

\begin{pycode}
>>> 't' in s
True
\end{pycode}

\section{การเปรียบเทียบ String}

การเปรียบเทียบ String สามารถใช้สัญลักษณ์  ( > , < , <= , <= , == , !=  ) เพื่อเปรียบเทียบค่าของ String สองชุด โดยดูผลลัพธ์ของการเปรียบเทียบค่าของ ASCII value นั้นๆ

\begin{pycode}
>>> 'banana' == 'banana'
True
>>> 'banana' !=  'banana'
False
>>>  'banana' >  'banana'
False
>>>  'banana' <  'banana'
False
>>>  'banana' >  'Banana'
True
>>>  'banana' >  'bazooka'
False
\end{pycode}


\section{การจัดวางรูปแบบของ String (String Formatting)}

การเปลี่ยนการจัดวางรูปแบบของ String มีสองวิธีคือ แบบ Classic ซึ่งทำได้โดยใส่สัญลักษณ์ + แต่สัญลักษณ์นี้จะมีข้อจำกัดคือไม่สามารถแทรกข้อความระหว่างกันได้ แต่หากใช้สัญลักษณ์ \texttt{\%} จะช่วยแก้ไขข้อจำกัดนี้ได้ เช่น \texttt{\%s} สำหรับ string และ \texttt{\%d} สำหรับตัวเลข 

\begin{pycode}
%>>> 'Hello' + 'Mike'
%'HelloMike'
%>>> 'Hello \%s' \%'Mike'
%'Hello Mike'
%>>> 'Hello `\%s\exclaim\exclaim' \%'Mike'
%'Hello Mike!!'
%>>>
\end{pycode}

\begin{pycode}
%>>> 'Total is \%d baht' \% 12
%'Total is 12 baht'
%>>>
\end{pycode}



ส่วนการเปลี่ยนการจัดวางของ String แบบ Modern คือ ใช้ .format และระบุ Parameters ได้มากกว่า 1 ตัว อีกทั้งยังสามารถจัดเรียงลำดับ Parameters สลับก่อนหลังได้ตามสะดวก สามารถศึกษาเพิ่มเติมได้ที่ \url{https://docs.python.org/3/library/string.html\#format-examples}

\begin{pycode}
>>> x = 12
>>> 'Total is {0} baht' .format(x)
'Total is 12 baht'
>>> 'Total is {1} baht. Mr. {0}' .format('Mike', x)
'Total is 12 baht. Mr. Mike'
\end{pycode}


\section{แบบฝึกหัด}
\begin{enumerate} 
\item 	เขียนฟังก์ชันต่อไปนี้
\begin{itemize}
\item 	รับค่าข้อความ 'James had had had the cat.'
\item 	นับจำนวนคำว่า had
\end{itemize}
\item 	เขียนฟังก์ชันต่อไปนี้
\begin{itemize}
\item 	รับค่าข้อความ  'I intend to live forever, or die trying.'
\item 	แทนค่าคำว่า to ด้วย three
\end{itemize}
\item 	เขียนฟังก์ชันต่อไปนี้
\begin{itemize}
\item 	คำนวณความยาวของ string ที่รับมาจากผู้ใช้
\end{itemize}
\item 	เขียนฟังก์ชันต่อไปนี้
\begin{itemize}
\item 	รับ string มาแล้วเปลี่ยนค่ากลับกันระหว่างตัวอักษรตัวแรกกับตัวสุดท้ายของ string นั้น
\end{itemize}
\end{enumerate}


