\chapter{ลิสต์ (Lists)}
\section{ความหมายของลิสต์}

ลิสต์ (List) เป็นโครงสร้างข้อมูลที่สำคัญมากของภาษา Python คล้ายคลึงกับ Array ในภาษาอื่นๆ คือ ชุดของข้อมูลที่เรียงลำดับต่อๆ กัน จะเป็นค่าของอะไรก็ได้ การสร้าง list โดยกำหนดสัญลักษณ์  \pyinline{[]} เช่น  \pyinline{t = []} หรือ  \pyinline{t=list()}

\begin{pycode}
>>> t = []
>>> t
[]
>>> type(t)
|<class \rq{}list\rq{}>|
>>> id(t)
55105976
>>> t = list()
\end{pycode}


ตัวอย่างของการกำหนดค่าใน List เช่น  \pyinline{t = [1, 2, 3, 4]} เป็น list ของตัวเลข  \pyinline{t = [1, "yes", "no", 1.1]} เป็นลิสต์ผสมของตัวเลขและข้อความ และ  \pyinline{t = [1, 2, 3, ['yes', 'no'], []]} เป็นลิสต์ที่มีลิสต์เป็นองค์ประกอบอยู่ด้วย กล่าวได้ว่าเราสามารถเอาค่าของหลายๆ ประเภทมาอยู่รวมกันในลิสต์เดียวกันได้ 

\begin{pycode}
>>> t = [1,2,3,4,5]
>>> len(t)
5
>>> x = [1,'Mike',1.1,True]
>>> x
[1,'Mike',1.1,True]
>>> len(x)
4
>>> y = [1,['a','b'],True]
>>> y
[1,['a','b'],True]
>>> len(y)
3
>>>
\end{pycode}


\section{การเข้าถึงค่าในลิสต์}

ค่าในลิสต์จะเรียงตามตัวชี้หรือ Index ที่เริ่มต้นที่  \pyinline{0} เช่น \pyinline{t=[0]} และหากมีลิสต์ซ้อนอยู่ในลิสต์จะสามารถแสดงตัวชี้ได้ด้วยการกำหนดตัวชี้หลักตามด้วยตัวชี้ย่อย เช่น \pyinline{t=[1][0]}

\begin{pycode}
>>> y = [1,['a','b'], True]
>>> y
[1,['a','b'], True]
>>> len(y)
3
>>> t
[1, 2, 3, 4, 5, 6]
>>> t[0]
1
>>> t[1]
2
>>> t[2]
3
>>> y[0]
1
>>> y[1]
['a', 'b']
>>> y[1][0]
'a'
\end{pycode}


\section{การแบ่งข้อมูลในลิสต์ (List Slicing)}

List slicing หรือการแบ่งข้อมูลในลิสต์เป็นชุดข้อมูลย่อยๆ จะเขียนในรูปแบบ  \pyinline{[a:b]} เมื่อ a เป็น Index เริ่มต้นและ b เป็น Index ก่อนสมาชิกตัวสุดท้ายที่ต้องการตัด

\begin{pycode}
>>> t
[1, 2, 3, 4, 5, 6]
>>> t[1:3]
[2,3]
>>> t[2:]
[3, 4, 5, 6]
>>> t[:4]
[1, 2, 3, 4]
>>>
\end{pycode}

\section{Lists เปลี่ยนแปลงค่าได้}
ลิสต์สามารถเปลี่ยนแปลงค่าได้ 

\begin{pycode}
>>> t
[True, 2, 3, 4, 5, 6]
>>> t[1] = 'Hello World'
>>> t
[True, 'Hello World', 3, 4, 5, 6]
>>> t[1]
'Hello World'
\end{pycode}


\section{การใช้ in กับลิสต์}

การดำเนินการด้วย in สามารถใช้กับลิสต์ได้ 

\begin{pycode}
>>> t
[True, 2, 3, 4, 5, 6]
>>> t[1] = 'Hello World'
>>> t
[True, 'Hello World', 3, 4, 5, 6]
>>> t[1]
'Hello World'
>>> 3 in t
True
\end{pycode}


\section{การเดินทางไปในลิสต์ (List Traversal)}
\subsection{การใช้ for loop และตัวดำเนินการ in ในการเดินทางไปในลิสต์ }

Source code:
\begin{pycode}
fruits = ['banana', 'orange', 'mango']
for fruit in fruits: print(fruit)
\end{pycode}

Result:
\begin{pycode}
>>>
banana
orange
mango
>>>
\end{pycode}

\subsection{การใช้ฟังก์ชัน  \texttt{range()} กับลิสต์}

สำหรับ  \pyinline{range()} ของความยาวของตัวแปร จะถูกนำมาใช้ในการเดินทางด้วย index ในลิสต์

Source code:
\begin{pycode}
for i in range(len(fruits)):
    print('{0} = {1}' .format(i, fruits[i]))
\end{pycode}

Result:
\begin{pycode}
>>>
0 = banana
1 = orange
2 = mango
>>>
\end{pycode}

\section{ตัวดำเนินการของลิสต์ (List Operators)}

ถ้าต้องการเอาลิสต์มารวมกันให้ใช้เครื่องหมายบวก (+) ถ้าต้องการขยายลิสต์ให้มีค่าชุดเดิมเพิ่มเป็นกี่เท่าตัวให้ใช้เครื่องหมายดอกจัน (*)

\begin{pycode}
>>> a = [1,2,3]
>>> b = [4,5,6]
>>> a
[1, 2, 3]
>>> b
[4, 5, 6]
>>> a + b
[1, 2, 3, 4, 5, 6]
>>> a * 2
[1, 2, 3, 1, 2, 3]
>>>
\end{pycode}


\section{เมธอดของลิสต์ (List Methods)}

การขยายลิสต์ด้วยอีกลิสต์หนึ่ง ให้ใช้คำสั่ง  \pyinline{list.extend()}
\begin{pycode}
>>> a
[1, 2, 3]
>>> b
[4, 5, 6]
>>> a.extend(b)
>>> a
[1, 2, 3, 4, 5, 6]
\end{pycode}

การเพิ่มค่าในลิสต์ทำได้ด้วยคำสั่ง  \pyinline{list.append()} ค่าใหม่ที่ได้จะต่อท้ายตัวสุดท้ายในลิสต์
\begin{pycode}
>>> a.append(7)
>>> a
[1, 2, 3, 4, 5, 6, 7]
\end{pycode}


การเพิ่มค่าในลิสต์โดยกำหนดตำแหน่งของ  index ให้ใช้คำสั่ง  \pyinline{list.insert()}
\begin{pycode}
>>> a.insert(0, 0)
>>> a
[0, 1, 2, 3, 4, 5, 6, 7]
\end{pycode}


การลบค่าในลิสต์ทำได้ด้วยคำสั่ง  \pyinline{list.remove()}
\begin{pycode}
>>> a.remove(7)
>>> a
[0, 1, 2, 3, 4, 5, 6]
\end{pycode}


นอกจากนี้สามารถลบค่าในลิสต์ได้ด้วยคำสั่ง del โดยจะต้องระบุค่า Index ของตัวที่ต้องการลบ เช่น  \pyinline{del a[0]} เป็นการลบค่าลิสต์ที่มี index 0 หรือถ้าลบเป็นช่วงให้ระบุตำแหน่งเริ่มต้นที่จะลบจนถึงตำแหน่งตัวก่อนสุดท้ายที่จะลบ  \pyinline{del a[2:4]} จะลบตัวที่ 2 และ 3 ในลิสต์ และถ้าลบค่าในลิสต์ออกทั้งหมดให้ใช้คำสั่ง  \pyinline{del a[ : ]}

ศึกษาเรื่อง list methods เพิ่มเติมได้ที่ \url{https://docs.python.org/3/tutorial/datastructures.html}

\section{Map, reduce, and filter}

การสร้าง Map ฟังก์ชัน เป็นการทำให้ลิสต์หนึ่งเป็นอีกลิสต์หนึ่ง ให้ฟังก์ชันชื่อ  \pyinline{capitalize()} รับลิสต์ t มา แล้ว return ลิสต์ r แล้วทำการเดินทางในค่าแต่ละค่า เมื่อเจอค่าก็ให้ทำการประมวลผลเป็นตัวพิมพ์ใหญ่ แล้วเก็บไว้ในลิสต์ r

Source code:
\begin{pycode}
def capitalize(t):
    r = []
    for s in t:
        r.append(s.capitalize())
    return r
\end{pycode}

Result:
\begin{pycode}
>>> capitalize(['a', 'b', 'c', 'd'])
['A', 'B', 'C', 'D']
>>>
\end{pycode}



การสร้าง Reduce ฟังก์ชันเป็นการประมวลผลลิสต์เพื่อการผลสรุป ให้ฟังก์ชันชื่อ  \pyinline{sum()} รับลิสต์ t มา แล้ว return ค่า sum โดยกำหนดตัวแปรชื่อ sum ให้ค่าเป็น 0 แล้วเดินทางไปในลิสต์ทีละค่า แล้วนำค่าเมื่อบวกกัน เมื่อบวกจนครบทุกตัวแล้วให้ส่งค่ากลับมาเป็น sum

Source code:
\begin{pycode}
def sum(t):
    sum = 0
    for x in t: sum += x
    return sum
\end{pycode}

Result:
\begin{pycode}
>>> sum([1,2,3,4,5])
15
\end{pycode}


ฟังก์ชันอีกประเภทหนึ่งเรียกว่า filter ฟังก์ชัน คือการ search แบบรับลิสต์มาแล้ว return ค่า คือมีการค้นหาแล้วทำการประมวลผลค่านั้นๆ หรืออาจจะ return มาเป็นลิสต์ก็ได้ แล้วก็ทำการประมวลผลกับข้อมูลที่อยู่ในลิสต์นั้น เช่น ฟังก์ชันรับลิสต์ t เข้าไป แล้ว return ลิสต์ที่เป็น integer เท่านั้น โดยตั้งต้นสร้างลิสต์ r แล้วเดินทางไปในค่าแต่ละค่าของลิสต์ t ถ้าเจอว่าประเภทของค่าเป็น int ให้ทำการแทรกค่าในลิสต์ r เมื่อทำครบแล้วให้ส่งค่าลิสต์ r ออกมา

Source code:
\begin{pycode}
def only_int(t):
    r = []
    for x in t:
        if type(x) == int: r.append(x)
    return r
\end{pycode}

Result:
\begin{pycode}
>>> only_int([1,2,3,True,'hello',4,'abcdef',1.1)
[1, 2, 3, 4]
>>>
\end{pycode}

\section{Lists กับ String}

String เปลี่ยนแปลงค่าไม่ได้ แต่ List เปลี่ยนแปลงค่าได้ ทั้ง String และ List เป็นการเรียงลำดับและเปลี่ยนแปลงค่ากลับกันไปมาได้ด้วยการใช้ฟังก์ชันของลิสต์ เช่น \pyinline{split(), join()}

\begin{pycode}
>>> s = 'Mink is a cat.'
>>> s
'Mink is a cat.'
>>> t = s.split()
>>> t
['Mink', 'is', 'a', 'cat.']
>>> ' '.join(t)
'Mink is a cat.'
>>> p = '081-123-4567'
>>> p
'081-123-4567'
>>> t = p.split('-')
>>> t
['081', '123', '4567']
>>> '-'.join(t)
'081-123-4567'
\end{pycode}


\section{Objects and values}

ภาษา Python เพื่อประหยัดพื้นที่ในหน่วยความจำ สำหรับ String ซึ่งไม่สามารถเปลี่ยนแปลงค่าได้ หรือ Immutable Data Structure ภาษา Python จะชี้ชื่อตัวแปรไปที่ที่เดียวกันสำหรับค่าที่เหมือนกัน 

\begin{pycode}
>>> a = 'banana'
>>> b = 'banana'
>>> id(a)
67486272
>>> id(b)
67486272
>>> a is b
True
\end{pycode}


แต่สำหรับลิสต์ซึ่งเปลี่ยนแปลงค่าได้ หรือ Mutable Data Structure ภาษา Python จะเก็บไว้คนละที่ในหน่วยความจำ แต่สามารถสร้างชื่อตัวแปรต่อๆ กันมาได้ สำหรับตำแหน่งหนึ่งๆ เรียกว่า การทำ Aliasing

Objects อยู่ในหน่วยความจำมี Values แต่ไม่มีชื่อ แต่มี id หรือหมายเลขกำกับ สร้างตัวแปรเพื่อชี้ไปยัง Objects เหล่านั้น ตั้งตัวแปรหลายตัวหรือตัวเดียวก็ได้

\begin{pycode}
>>> a = [1,2,3]
>>> b = [1,2,3]
>>> a is b
False
>>> id(a)
67462368
>>> id(b)
67464088
>>> c = a
>>> id(c)
67462368
>>> c is a
True
\end{pycode}


\section{แบบฝึกหัด}
\begin{enumerate} 
\item กำหนดคะแนนของนักเรียน 5 คน เก็บไว้ใน list คือ 75 80 68 82 62 ต้องการหาคะแนนรวม คะแนนเฉลี่ย คะแนนมากสุด คะแนนน้อยสุด 
\item ให้ข้อมูลเป็น list มีค่าคือ 3 4 12 31 ให้หาจำนวนสมาชิกใน list  และพิมพ์สมาชิกทุกตัวตัวละบรรทัด
\item ให้ข้อมูลเป็น list มีค่าคือ 25 4 3 15 21 นำมาเรียงจากน้อยไปหามาก พร้อมหาผลคูณของสมาชิกทุกตัว
\item ให้ข้อมูลเป็น list มีค่าคือ 6 9 8 7 10 ให้ลบข้อมูลตัวแรกทิ้งแล้วเพิ่มข้อมูลตัวแรกไปที่ตำแหน่งสุดท้าย
\item จงสร้างข้อมูลเป็น list ชื่อ a มีค่าคือ 1-10 และ list ชื่อ b มีค่าคือ 11-20 โดยใช้ for และใช้ฟังก์ชัน append เพื่อเพิ่มสมาชิกใน list แล้วหาค่า a+b
\end{enumerate}


